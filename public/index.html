<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Social Bot (Render Edition)</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        body { background: #f0f2f5; display: flex; justify-content: center; align-items: center; height: 100vh; }
        
        .chat-card {
            width: 100%;
            max-width: 420px;
            height: 80vh;
            background: white;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: #7209b7;
            color: white;
            padding: 20px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        #chat-window {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: #fafafa;
        }

        .msg {
            padding: 10px 16px;
            border-radius: 18px;
            font-size: 0.95rem;
            line-height: 1.5;
            max-width: 85%;
            word-wrap: break-word;
        }

        .user { background: #7209b7; color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
        .bot { background: #eee; color: #333; align-self: flex-start; border-bottom-left-radius: 4px; white-space: pre-wrap; }

        .loader {
            padding: 10px 20px;
            font-size: 0.8rem;
            color: #7209b7;
            display: none;
        }

        .input-group {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }

        input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 25px;
            outline: none;
        }

        button {
            background: #7209b7;
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 25px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="chat-card">
    <div class="header">ü§ñ ‡∏ö‡∏≠‡∏ó‡πÅ‡∏ö‡πá‡∏Å (Gemini AI)</div>
    <div id="chat-window">
        <div class="msg bot">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ! ‡∏ú‡∏°‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Render ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö</div>
    </div>
    <div id="loading" class="loader">AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î...</div>
    <div class="input-group">
        <input type="text" id="user-input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..." autocomplete="off">
        <button onclick="send()">‡∏™‡πà‡∏á</button>
    </div>
</div>

<script>
    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô URL ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô URL ‡∏Ç‡∏≠‡∏á Render ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    const RENDER_URL = "https://ai-server-ay8z.onrender.com"; 

    const chatWindow = document.getElementById("chat-window");
    const userInput = document.getElementById("user-input");
    const loading = document.getElementById("loading");

    userInput.addEventListener("keypress", (e) => { if (e.key === "Enter") send(); });

    function addMessage(text, type) {
        const div = document.createElement("div");
        div.className = `msg ${type}`;
        div.innerText = text;
        chatWindow.appendChild(div);
        chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    async function send() {
        const msg = userInput.value.trim();
        if (!msg) return;

        addMessage(msg, "user");
        userInput.value = "";
        loading.style.display = "block";

        try {
            const response = await fetch(`${RENDER_URL}/chat`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: msg })
            });

            if (!response.ok) throw new Error("Server Error");

            const data = await response.json();
            loading.style.display = "none";
            addMessage(data.reply, "bot");

        } catch (error) {
            console.error(error);
            loading.style.display = "none";
            addMessage("‚ö†Ô∏è ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå Render ‡∏≠‡∏≤‡∏à‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ Start-up (Cold Start) ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 1 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏∑‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ CORS", "bot");
        }
    }
</script>

</body>
</html>